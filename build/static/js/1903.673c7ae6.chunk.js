"use strict";(self.webpackChunkaqar_super_admin=self.webpackChunkaqar_super_admin||[]).push([[1903],{7388:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});s(2791);var r=s(6856),l=s(71),i=s(7049),n=s(4420),o=s(184);const d=e=>{let{label:a="Upload image",placeholder:s="Upload img",image:d,imageValue:t,onImageUpload:c,onDeleteImage:m,onDeleteImageValue:u}=e;return(0,o.jsxs)("div",{className:i.Z.upLoad,children:[(0,o.jsxs)("label",{htmlFor:"image_upload",children:[a," ",(0,o.jsx)("span",{children:"*"})]}),(0,o.jsx)("div",{className:i.Z.image_container,children:(0,o.jsxs)("div",{id:"image_upload",className:i.Z.image_slot,children:[(0,o.jsx)(r.YFT,{}),s,(0,o.jsx)("input",{type:"file",id:"image_upload",onChange:c})]})}),(0,o.jsxs)("div",{className:"flex gap-3 align-items-center ",children:[t&&(0,o.jsx)("div",{className:i.Z.image_preview,children:(0,o.jsx)("div",{className:i.Z.images_container,children:(0,o.jsx)(n.E,{src:t,loading:"lazy",alt:"uploaded",width:80,height:80})})}),d&&(0,o.jsx)("div",{className:i.Z.image_preview,children:(0,o.jsxs)("div",{className:i.Z.images_container,children:[(0,o.jsx)(n.E,{src:d,loading:"lazy",alt:"uploaded",width:80,height:80}),(0,o.jsx)("button",{type:"button",onClick:m,className:i.Z.delete_button,children:(0,o.jsx)(l.bjh,{})})]})})]})]})}},2203:(e,a,s)=>{s.d(a,{AR:()=>N,BA:()=>u,EV:()=>o,G3:()=>x,Vn:()=>m,Wn:()=>p,Zm:()=>d,_H:()=>h,cz:()=>_,dK:()=>v,hS:()=>t,jE:()=>j,kR:()=>b,nn:()=>g,tk:()=>c,vs:()=>y});var r=s(8556),l=s(3713),i=s(6491),n=s(2564);const o=async()=>{const{data:e}=await i.Z.get("/agencies/admin/profile");return e.data.user||[]},d=async()=>{const{data:e}=await i.Z.get("/add-types/");return e.data.adTypes||[]},t=async()=>{const{data:e}=await i.Z.get("/locations/emirates");return e.data.emirates||[]},c=async()=>{const{data:e}=await i.Z.get("/stats/dashboard");return e.data||[]},m=()=>(0,r.D)({mutationFn:async e=>(await i.Z.post("/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const s=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";n.Am.error(s),console.error("Upload failed:",e)}}),u=()=>(0,r.D)({mutationFn:async e=>(await i.Z.post("/files/upload/single/video",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const s=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";n.Am.error(s),console.error("Upload failed:",e)}}),p=()=>(0,r.D)({mutationFn:async e=>(await i.Z.put("/agencies/admin/profile",e)).data,onError:e=>{var a,s;const r=null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0];n.Am.error(r),console.error("Submission failed:",e)}}),h=()=>{const e=(0,l.NL)();return(0,r.D)({mutationFn:async e=>{let{id:a,visibility:s}=e;return(await i.Z.post("/properties/admin/set-visibility/".concat(a),{visibility:s})).data},onSuccess:()=>{n.Am.success("Visibility updated successfully!"),e.invalidateQueries("PropertiesAdmin")},onError:e=>{var a,s;const r=(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0])||"An error occurred.";n.Am.error(r),console.error("Submission failed:",e)}})},v=async()=>{const{data:e}=await i.Z.get("/property-properties/types");return e.data.properties||[]},x=async()=>{const{data:e}=await i.Z.get("/properties/admin/my-properties");return e.data.properties||[]},j=async e=>{const{data:a}=await i.Z.get("/properties/admin/".concat(e));return a.data.property||[]},g=()=>(0,r.D)({mutationFn:async e=>(await i.Z.post("/properties/admin",e)).data,onError:e=>{var a,s;const r=(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0])||"Submission failed. Please try again.";n.Am.error(r),console.error("Submission failed:",e)}}),_=e=>(0,r.D)({mutationFn:async a=>(await i.Z.put("/properties/admin/".concat(e),a)).data,onError:e=>{var a,s;const r=(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0])||"Submission failed. Please try again.";n.Am.error(r),console.error("Submission failed:",e)}}),y=()=>(0,r.D)({mutationFn:async e=>(await i.Z.get("/subscriptions/ad-type/".concat(e))).data.data.subscriptions,onError:e=>{var a,s;const r=(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0])||"Submission failed. Please try again.";n.Am.error(r),console.error("Submission failed:",e)}}),N=()=>(0,r.D)({mutationFn:async e=>(await i.Z.post("/property-subscriptions/admin",e)).data.data,onError:e=>{var a,s;const r=(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.errors[0])||"Submission failed. Please try again.";n.Am.error(r),console.error("Submission failed:",e)}}),b=async e=>(await i.Z.get("/locations/choose-location?query=".concat(e))).data.data.hits},1903:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(2791),l=s(9362),i=s.n(l),n=s(2203),o=s(4893),d=s(7049),t=s(5705),c=s(184);const m=e=>{var a,s,r,l,i,m,u,p;let{formData:h,setFormData:v,nextStep:x,getPerpose:j}=e;const{data:g}=(0,o.a)({queryKey:["addTypes"],queryFn:n.Zm}),_=(0,t.TA)({initialValues:{purpose:h.purpose,category:h.category,title:{ar:(null===(a=h.title)||void 0===a?void 0:a.ar)||"",en:(null===(s=h.title)||void 0===s?void 0:s.en)||""},measurement:h.measurement,type:h.type,advertiserType:h.advertiserType,price:h.price,adType:h.adType,currency:h.currency,ready:h.ready,commercialProperties:h.commercialProperties||""},validate:e=>{var a,s;let r={};return e.commercialProperties||(r.commercialProperties="commercial Properties is required"),e.purpose||(r.purpose="Purpose is required"),e.adType||(r.adType="ad Type is required"),e.category||(r.category="Category is required"),e.measurement||(r.measurement="measurement is required"),null!==(a=e.title)&&void 0!==a&&a.ar||(r.title={ar:"Ad Title in Arabic is required"}),null!==(s=e.title)&&void 0!==s&&s.en||(r.title={...r.title,en:"Ad Title in English is required"}),e.type||(r.type="property Type is required"),e.advertiserType||(r.advertiserType="Advertiser Type is required"),e.price||(r.price="Total Price is required"),e.currency||(r.currency="Currency is required"),null===e.ready&&(r.ready="Delivery readiness is required"),r},onSubmit:e=>{const a={...h,...e};console.log("Step 1 Form Data:",a),v(a),x()}});return(0,c.jsxs)("form",{onSubmit:_.handleSubmit,className:d.Z.form_contact_home,children:[(0,c.jsxs)("div",{className:"div-flex-co pb-5",children:[(0,c.jsx)("h2",{children:"Publish your advertisement"}),(0,c.jsx)("p",{className:"p-0",children:"Add your advertisement details"})]}),(0,c.jsxs)("div",{className:"grid",children:[(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Please Select Purpose ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"purpose",value:_.values.purpose,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Purpose"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"purpose"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.purpose&&(0,c.jsx)("small",{children:_.errors.purpose})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["select commercial property ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"commercialProperties",value:_.values.commercialProperties,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"select commercial property"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"commercial-property"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.commercialProperties&&(0,c.jsx)("small",{children:_.errors.commercialProperties})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Select Category ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"category",value:_.values.category,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Select Category"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"category"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.category&&(0,c.jsx)("small",{children:_.errors.category})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Select ad type ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"adType",value:_.values.adType,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Select adType"}),null===g||void 0===g?void 0:g.map((e=>{var a;return(0,c.jsx)("option",{value:e.id,children:null===(a=e.name)||void 0===a?void 0:a.en},e.id)}))]}),_.errors.adType&&(0,c.jsx)("small",{children:_.errors.adType})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Ad Title En ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{type:"text",name:"title.en",value:null===(r=_.values.title)||void 0===r?void 0:r.en,onChange:_.handleChange,placeholder:"Ex: Apartment 150 m for sale in Sun street excellent price",required:!0}),(null===(l=_.errors.title)||void 0===l?void 0:l.en)&&(0,c.jsx)("small",{children:null===(i=_.errors.title)||void 0===i?void 0:i.en})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Ad Title AR ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{type:"text",name:"title.ar",value:null===(m=_.values.title)||void 0===m?void 0:m.ar,onChange:_.handleChange,placeholder:"Ex: Apartment 150 m for sale in Sun street excellent price",required:!0}),(null===(u=_.errors.title)||void 0===u?void 0:u.ar)&&(0,c.jsx)("small",{children:null===(p=_.errors.title)||void 0===p?void 0:p.ar})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Advertiser Type ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"advertiserType",value:_.values.advertiserType,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Advertiser Type"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"advertiser-type"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.advertiserType&&(0,c.jsx)("small",{children:_.errors.advertiserType})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["property Type ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"type",value:_.values.type,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"property Type"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"property-type"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.type&&(0,c.jsx)("small",{children:_.errors.type})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Advertiser Type ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"measurement",value:_.values.measurement,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"property Type"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"measurement"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.measurement&&(0,c.jsx)("small",{children:_.errors.measurement})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Total Price ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{type:"number",name:"price",value:_.values.price,onChange:_.handleChange,placeholder:"Enter total price",min:"0",required:!0}),_.errors.price&&(0,c.jsx)("small",{children:_.errors.price})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Select Currency ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"currency",value:_.values.currency,onChange:_.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{"data-display":"Select Currency",children:"Select Currency"}),null===j||void 0===j?void 0:j.map((e=>{var a;return"currency"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),_.errors.currency&&(0,c.jsx)("small",{children:_.errors.currency})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{children:["Delivery Readiness ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("div",{className:d.Z.radio_container_size,children:[(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{type:"radio",name:"ready",value:"ready",checked:!0===_.values.ready,onChange:()=>_.setFieldValue("ready",!0)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Ready"})]})}),(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{type:"radio",name:"ready",value:"unready",checked:!1===_.values.ready,onChange:()=>_.setFieldValue("ready",!1)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Unready"})]})})]}),_.errors.ready&&(0,c.jsx)("small",{children:_.errors.ready})]})})]}),(0,c.jsx)("div",{className:"flex mt-4 align-items-center justify-content-between",children:(0,c.jsx)("button",{type:"submit",className:"add_btn",children:"Next"})})]})};var u=s(7388);const p=e=>{var a,s;let{formData:l,getPerpose:i,setFormData:o,previousStep:m,nextStep:p}=e;const{mutate:h}=(0,n.Vn)(),[v,x]=(0,r.useState)(null),[j,g]=(0,r.useState)(null),_=(0,t.TA)({initialValues:{description:l.description||{ar:"",en:""},size:l.size||0,rooms:l.rooms||0,bathrooms:l.bathrooms||0,age:l.age||0,serviceCharge:l.serviceCharge||"",furnished:l.furnished||!1,mortageEligable:l.mortageEligable||!1,authQRCode:l.authQRCode||"",propertyNumber:l.propertyNumber||"",authNumber:l.authNumber||""},validate:e=>{var a,s;const r={};return null!==(a=e.description)&&void 0!==a&&a.ar||(r.description={ar:"Property Description in Arabic is required"}),null!==(s=e.description)&&void 0!==s&&s.en||(r.description={...r.description,en:"Property Description in English is required"}),e.authNumber||(r.authNumber="auth Number is required"),e.propertyNumber||(r.propertyNumber="property Number is required"),e.authQRCode||(r.authQRCode="auth QRCode is required"),e.rooms||(r.rooms="rooms is required"),e.bathrooms||(r.bathrooms="bathrooms is required"),e.size||(r.size="Area is required"),e.age||(r.age="Property Age is required"),e.serviceCharge||(r.serviceCharge="Service Charge is required"),"boolean"!==typeof e.furnished&&(r.furnished="furnished selection is required"),"boolean"!==typeof e.mortageEligable&&(r.mortageEligable="Mortgage Eligibility is required"),console.log("errors",r),r},onSubmit:e=>{const a={...l,...e};o(a),p()}}),y=(0,r.useCallback)((async e=>{const a=e.target.files[0];if(a){const e=new FormData;e.append("files",a),await h(e,{onSuccess:e=>{const a=e.data.files[0];x(a.link),_.setFieldValue("authQRCode",a.id)}})}}),[h,_]),N=(0,r.useCallback)((()=>{}),[]),b=(0,r.useCallback)((()=>{x(null),_.setFieldValue("authQRCode","")}),[_]);return(0,c.jsxs)("form",{onSubmit:_.handleSubmit,className:d.Z.form_contact_home,children:[(0,c.jsxs)("div",{className:"div-flex-co pb-5",children:[(0,c.jsx)("h2",{children:"Property Info"}),(0,c.jsx)("p",{className:"p-0",children:"Add your property details"})]}),(0,c.jsxs)("div",{className:"grid ",children:[(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:"".concat(d.Z.inout_icon_textarea," ").concat(d.Z.inout_icon_div),children:[(0,c.jsxs)("label",{htmlFor:"property-description",children:["Property Description EN ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("textarea",{name:"description.en",placeholder:"Complete description of the property...",rows:"4",id:"property-description",className:"text_area",value:_.values.description.en,onChange:_.handleChange}),(null===(a=_.errors.description)||void 0===a?void 0:a.en)&&(0,c.jsx)("small",{className:"p-error",children:_.errors.description.en})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:"".concat(d.Z.inout_icon_textarea," ").concat(d.Z.inout_icon_div),children:[(0,c.jsxs)("label",{htmlFor:"property-description-ar",children:["Property Description AR ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("textarea",{name:"description.ar",placeholder:"Complete description of the property...",rows:"4",id:"property-description-ar",className:"text_area",value:_.values.description.ar,onChange:_.handleChange}),(null===(s=_.errors.description)||void 0===s?void 0:s.ar)&&(0,c.jsx)("small",{className:"p-error",children:_.errors.description.ar})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"area",children:["Add Area ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"size",type:"number",min:"0",placeholder:"Add Area",value:_.values.size,onChange:_.handleChange}),_.errors.size&&(0,c.jsx)("small",{className:"p-error",children:_.errors.size})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"rooms",children:["Number of rooms ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"rooms",className:d.Z.input,placeholder:" ",type:"number",value:_.values.rooms,onChange:_.handleChange}),_.errors.rooms&&(0,c.jsx)("small",{className:"p-error",children:_.errors.rooms})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"bathrooms",children:["Number of bathrooms ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"bathrooms",className:d.Z.input,placeholder:" ",type:"number",value:_.values.bathrooms,onChange:_.handleChange}),_.errors.bathrooms&&(0,c.jsx)("small",{className:"p-error",children:_.errors.bathrooms})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"age",children:["Property Age",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"age",className:d.Z.input,placeholder:" ",type:"number",value:_.values.age,onChange:_.handleChange}),_.errors.age&&(0,c.jsx)("small",{className:"p-error",children:_.errors.age})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"serviceCharge",children:["Service Charge",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"serviceCharge",className:d.Z.input,placeholder:"",type:"number",value:_.values.serviceCharge,onChange:_.handleChange}),_.errors.serviceCharge&&(0,c.jsx)("small",{className:"p-error",children:_.errors.serviceCharge})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"propertyNumber",children:["property Number",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"propertyNumber",className:d.Z.input,placeholder:"",type:"text",value:_.values.propertyNumber,onChange:_.handleChange}),_.errors.propertyNumber&&(0,c.jsx)("small",{className:"p-error",children:_.errors.propertyNumber})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"authNumber",children:["auth Number",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"authNumber",className:d.Z.input,placeholder:"",type:"text",value:_.values.authNumber,onChange:_.handleChange}),_.errors.authNumber&&(0,c.jsx)("small",{className:"p-error",children:_.errors.authNumber})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"furnished",children:["furnished",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("div",{className:d.Z.radio_container_size,children:[(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{id:"furnished",name:"furnished",type:"radio",value:!0,checked:!0===_.values.furnished,onChange:()=>_.setFieldValue("furnished",!0)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Furnished"})]})}),(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{id:"unfurnished",name:"furnished",type:"radio",value:!1,checked:!1===_.values.furnished,onChange:()=>_.setFieldValue("furnished",!1)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Unfurnished"})]})})]}),_.errors.furnished&&(0,c.jsx)("small",{className:"p-error",children:_.errors.furnished})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"mortageEligable",children:["Mortgage Eligibility",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("div",{className:d.Z.radio_container_size,children:[(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{id:"eligible",name:"mortageEligable",type:"radio",value:!0,checked:!0===_.values.mortageEligable,onChange:()=>_.setFieldValue("mortageEligable",!0)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Eligible for Mortgage"})]})}),(0,c.jsx)("div",{className:d.Z.radio_wrapper,children:(0,c.jsxs)("label",{className:d.Z.radio_button,children:[(0,c.jsx)("input",{id:"not-eligible",name:"mortageEligable",type:"radio",value:!1,checked:!1===_.values.mortageEligable,onChange:()=>_.setFieldValue("mortageEligable",!1)}),(0,c.jsx)("span",{className:d.Z.radio_checkmark}),(0,c.jsx)("span",{className:d.Z.radio_label,children:"Not Eligible for Mortgage"})]})})]}),_.errors.mortageEligable&&(0,c.jsx)("small",{className:"p-error",children:_.errors.mortageEligable})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12",children:(0,c.jsx)(u.default,{label:"Upload Qr code image",placeholder:"Choose image",image:v,imageValue:j,onImageUpload:y,onDeleteImage:b,onDeleteImageValue:N})})]}),(0,c.jsxs)("div",{className:"flex mt-4 align-items-center justify-content-between",children:[(0,c.jsx)("div",{onClick:m,className:"btn_2",children:"Previous"}),(0,c.jsx)("button",{type:"submit",className:"add_btn",children:"Next"})]})]})};var h=s(6856),v=s(71),x=s(2564),j=s(8556),g=s(4373),_=s(8617),y=s(6053),N=s(4420);const b=e=>{var a,s,l,i,o,m;let{formData:u,getPerpose:p,setFormData:b,previousStep:f}=e;const{mutate:Z}=(0,n.Vn)(),{mutate:C}=(0,n.nn)(),[A,S]=(0,r.useState)([]),{mutate:F,data:D}=(0,j.D)({mutationFn:n.kR,onSuccess:()=>{},onError:e=>{console.error("Upload failed:",e)}}),P=(0,r.useRef)(null),[w,E]=(0,r.useState)(),[T,k]=(0,r.useState)([]),q=e=>{const{id:a,checked:s}=e.target,r=z.values.amenities;s?z.setFieldValue("amenities",[...r,a]):z.setFieldValue("amenities",r.filter((e=>e!==a)))};console.log("selectedLocation",w);const z=(0,t.TA)({initialValues:{floors:u.floors||0,finishing:u.finishing||"",customerPaymentMethod:u.customerPaymentMethod||"",addressDetails:u.addressDetails||{ar:"",en:""},space:u.space||0,size:u.size||0,amenities:u.amenities||[],images:u.images||[],location:u.location||(null===w||void 0===w?void 0:w._id)||""},validate:e=>{var a,s;const r={};return e.size||(r.size="size is required"),e.floors||(r.floors="Number of Floors is required"),e.finishing||(r.finishing="Finishing selection is required"),e.customerPaymentMethod||(r.customerPaymentMethod="Payment Method is required"),e.location||(r.location="location is required"),null!==(a=e.addressDetails)&&void 0!==a&&a.ar||(r.addressDetails={ar:"Property addressDetails is required"}),null!==(s=e.addressDetails)&&void 0!==s&&s.en||(r.addressDetails={...r.addressDetails,en:"Property addressDetails is required"}),e.space||(r.space="Space is required"),console.log("values",e),r},onSubmit:e=>{const a={...u,...e};b(a),C(a),x.Am.success("The property has been added successfully.")}}),V=(0,r.useCallback)((e=>{P.current&&!P.current.contains(e.target)&&(S([]),F())}),[F]);return(0,r.useEffect)((()=>(document.addEventListener("mousedown",V),()=>{document.removeEventListener("mousedown",V)})),[V]),(0,c.jsxs)("form",{onSubmit:z.handleSubmit,className:d.Z.form_contact_home,children:[(0,c.jsxs)("div",{className:"div-flex-co pb-5",children:[(0,c.jsx)("h2",{children:"Property Info"}),(0,c.jsx)("p",{className:"p-0",children:"Add your property details"})]}),(0,c.jsxs)("div",{className:"grid",children:[(0,c.jsxs)("div",{className:"col-12 md:col-12 lg:col-12 ",children:[(0,c.jsxs)("label",{htmlFor:"Location",children:["Location ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("div",{className:"".concat(d.Z.input_locatin," position-relative ").concat(d.Z.inout_adv),children:[(0,c.jsx)("input",{type:"text",placeholder:"enter Location",className:"form-control ".concat(d.Z.formControl),onChange:async e=>{const a=e.target.value;F(a)}}),(0,c.jsx)("div",{className:d.Z.icon,children:(0,c.jsx)(y.Ts9,{})}),(null===D||void 0===D?void 0:D.length)>0&&(0,c.jsx)("div",{ref:P,className:d.Z.resultSearch,children:D.map((e=>{var a;return(0,c.jsxs)("div",{onClick:()=>(e=>{console.log("location",e),E(e),z.setFieldValue("location",e._id),S([])})(e),className:d.Z.locationItem,children:[(0,c.jsxs)("h6",{children:[e.name.en," ",(0,c.jsx)("br",{}),(0,c.jsxs)("span",{children:["(",null===(a=e.parents)||void 0===a?void 0:a.map((e=>{var a;return null===e||void 0===e||null===(a=e.name)||void 0===a?void 0:a.en})).join(", "),")"]})]}),(null===w||void 0===w?void 0:w._id)===e._id&&(0,c.jsx)(_.lyK,{})]},e._id)}))}),(0,c.jsx)("div",{className:d.Z.selectedLocations,children:w&&(0,c.jsxs)("div",{className:d.Z.selectedLocation,children:[(0,c.jsx)("span",{children:w.name.en}),(0,c.jsx)("button",{type:"button",onClick:()=>E(null),children:(0,c.jsx)(g.j7p,{})})]})})]})]}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"floors",children:["Number of Floors ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"floors",className:d.Z.input,placeholder:"add Number of Floors",type:"number",value:z.values.floors,onChange:z.handleChange,onBlur:z.handleBlur}),z.errors.floors&&(0,c.jsx)("small",{className:"p-error",children:z.errors.floors})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"finishing",children:["Finishing ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"finishing",value:z.values.finishing,onChange:z.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Select Finishing"}),null===p||void 0===p?void 0:p.map((e=>{var a;return"finishing"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),z.errors.finishing&&(0,c.jsx)("small",{className:"p-error",children:z.errors.finishing})]})}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"customerPaymentMethod",children:["Payment Method ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsxs)("select",{name:"customerPaymentMethod",value:z.values.customerPaymentMethod,onChange:z.handleChange,className:"form-select ".concat(d.Z.formSelect),children:[(0,c.jsx)("option",{value:"",children:"Select Payment Method"}),null===p||void 0===p?void 0:p.map((e=>{var a;return"customer-payment-method"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsx)("option",{value:e._id,children:null===(a=e.name)||void 0===a?void 0:a.en},e._id)})):null}))]}),z.errors.customerPaymentMethod&&(0,c.jsx)("small",{className:"p-error",children:z.errors.customerPaymentMethod})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"addressDetails",children:["Address Details EN ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"addressDetails.en",className:d.Z.input,placeholder:"Address details such as: Street / Neighborhood / Compound / Complex.. etc ...",type:"text",value:null===(a=z.values.addressDetails)||void 0===a?void 0:a.en,onChange:z.handleChange,onBlur:z.handleBlur}),(null===(s=z.errors.addressDetails)||void 0===s?void 0:s.en)&&(0,c.jsx)("small",{className:"p-error",children:null===(l=z.errors.addressDetails)||void 0===l?void 0:l.en})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"addressDetails",children:["Address Details AR ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"addressDetails.ar",className:d.Z.input,placeholder:"Address details such as: Street / Neighborhood / Compound / Complex.. etc ...",type:"text",value:null===(i=z.values.addressDetails)||void 0===i?void 0:i.ar,onChange:z.handleChange,onBlur:z.handleBlur}),(null===(o=z.errors.addressDetails)||void 0===o?void 0:o.ar)&&(0,c.jsx)("small",{className:"p-error",children:null===(m=z.errors.addressDetails)||void 0===m?void 0:m.ar})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"space",children:["Space ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"space",className:d.Z.input,placeholder:"Enter property size",value:z.values.space,onChange:z.handleChange,onBlur:z.handleBlur,type:"number"}),z.errors.space&&(0,c.jsx)("small",{className:"p-error",children:z.errors.space})]})}),(0,c.jsx)("div",{className:"col-12 md:col-6 lg:col-6",children:(0,c.jsxs)("div",{className:d.Z.inout_adv,children:[(0,c.jsxs)("label",{htmlFor:"size",children:["Size ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("input",{name:"size",className:d.Z.input,placeholder:"",type:"number",value:z.values.size,onChange:z.handleChange,onBlur:z.handleBlur}),z.errors.size&&(0,c.jsx)("small",{className:"p-error",children:z.errors.size})]})}),(0,c.jsxs)("div",{className:"col-12 md:col-12 lg:col-12 ",children:[(0,c.jsxs)("div",{className:d.Z.upLoad,children:[(0,c.jsxs)("label",{htmlFor:"image_upload",children:["Upload Images ",(0,c.jsx)("span",{children:"*"})]}),(0,c.jsx)("div",{className:d.Z.image_container,children:(0,c.jsxs)("div",{id:"image_upload",className:d.Z.image_slot,children:[(0,c.jsx)(h.YFT,{}),"Upload img",(0,c.jsx)("input",{type:"file",id:"image_upload",multiple:!0,onChange:async e=>{const a=Array.from(e.target.files),s=new FormData;a.forEach((e=>{s.append("files",e)})),await Z(s,{onSuccess:e=>{const a=e.data.files,s=a.map((e=>e.link)),r=a.map((e=>e.id));k((e=>[...e,...s])),z.setFieldValue("images",[...z.values.images,...r])}})}})]})})]}),T.length>0&&(0,c.jsx)("div",{className:d.Z.image_preview,children:(0,c.jsx)("div",{className:d.Z.images_container,children:T.map(((e,a)=>(0,c.jsxs)("div",{className:d.Z.image_preview_item,children:[(0,c.jsx)(N.E,{src:e,alt:"uploaded-".concat(a),width:80,height:80,loading:"lazy"}),(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{const a=T.filter(((a,s)=>s!==e));k(a),z.setFieldValue("images",a)})(a),className:d.Z.delete_button,children:(0,c.jsx)(v.bjh,{})})]},a)))})})]}),(0,c.jsx)("div",{className:"col-12 md:col-12 lg:col-12 ",children:(0,c.jsxs)("div",{className:"optionsRoom",children:[(0,c.jsx)("h3",{className:"titleOptions",children:"Amenities"}),(0,c.jsx)("div",{className:"scrollMobile",children:(0,c.jsx)("div",{className:"filterCHECKED",children:null===p||void 0===p?void 0:p.map((e=>{var a;return"amenity"===e.type?null===(a=e.properties)||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsxs)("div",{className:"checkbox-wrapper-46",children:[(0,c.jsx)("input",{type:"checkbox",id:e._id,name:"amenities",className:"inp-cbx",checked:z.values.amenities.includes(e._id),onChange:q}),(0,c.jsxs)("label",{htmlFor:e._id,className:"cbx",children:[(0,c.jsx)("span",{children:(0,c.jsx)("svg",{viewBox:"0 0 12 10",height:"8px",width:"10px",children:(0,c.jsx)("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}),(0,c.jsx)("span",{children:null===(a=e.name)||void 0===a?void 0:a.en})]})]},e._id)})):null}))})})]})})]}),(0,c.jsxs)("div",{className:"flex mt-4 align-items-center justify-content-between",children:[(0,c.jsx)("div",{onClick:f,className:"btn_2",children:"Previous"}),(0,c.jsx)("button",{type:"submit",className:"add_btn",children:"Next"})]})]})};const f=function(){const{data:e}=(0,o.a)({queryKey:["Perpose"],queryFn:n.dK}),[a,s]=(0,r.useState)({purpose:"",category:"",commercialProperties:"",title:{ar:"",en:""},advertiserType:"",price:"",currency:"",ready:!1,description:{ar:"",en:""},rooms:0,bathrooms:0,furnished:!1,mortageEligable:!1,floors:0,finishing:"",customerPaymentMethod:"",addressDetails:{ar:"",en:""},space:0,images:[],adType:"",authQRCode:"",propertyNumber:"",authNumber:"",videos:[],tour:"HTTPS:",amenities:[],type:"",measurement:"",age:0,commession:0,serviceCharge:0,size:0,location:""});return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(i(),{children:[(0,c.jsx)(m,{formData:a,getPerpose:e,setFormData:s}),(0,c.jsx)(p,{formData:a,getPerpose:e,setFormData:s}),(0,c.jsx)(b,{formData:a,getPerpose:e,setFormData:s})]})})}},7049:(e,a,s)=>{s.d(a,{Z:()=>r});const r={form_contact_home:"addAd_form_contact_home__XbiCu",formSelect:"addAd_formSelect__SICoj",inout_icon_textarea:"addAd_inout_icon_textarea__Gv9VS",payments:"addAd_payments__WSgJW",hr:"addAd_hr__wrpE8",bold:"addAd_bold__zGqD0",span:"addAd_span__yFHUx",left:"addAd_left__y+3JS",filterSort:"addAd_filterSort__Avvbx",option:"addAd_option__2MXoI",input:"addAd_input__uwNK2",btn_radio:"addAd_btn_radio__qihQ6",nots:"addAd_nots__6ohel",right:"addAd_right__dcHxt",inout_adv:"addAd_inout_adv__sWwqA",radio_container_size:"addAd_radio_container_size__8ugZJ",radio_wrapper:"addAd_radio_wrapper__B3b8s",radio_button:"addAd_radio_button__AacQ7",radio_checkmark:"addAd_radio_checkmark__x6B3-",radio_label:"addAd_radio_label__YO+DC",image_wrapper:"addAd_image_wrapper__GJPDP",image_slot:"addAd_image_slot__M+r09",upLoad:"addAd_upLoad__CiCwX",image_preview:"addAd_image_preview__QmXDC",number_minus_plus:"addAd_number_minus_plus__3rBn0",images_container:"addAd_images_container__6-tvk",div:"addAd_div__2nK+p",image_preview_item:"addAd_image_preview_item__i2LK3",delete_button:"addAd_delete_button__Lb8BQ",inoutIconDiv:"addAd_inoutIconDiv__gGtRX",resultSearch:"addAd_resultSearch__zVcop",selectedLocations:"addAd_selectedLocations__QMTSY",selectedLocation:"addAd_selectedLocation__sqfP0",input_locatin:"addAd_input_locatin__gUGs4",icon:"addAd_icon__ZgAbH",title_location:"addAd_title_location__dna7Q",ul:"addAd_ul__BP2ru",selected:"addAd_selected__1YOhD"}}}]);
//# sourceMappingURL=1903.673c7ae6.chunk.js.map