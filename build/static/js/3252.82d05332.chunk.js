"use strict";(self.webpackChunkaqar_super_admin=self.webpackChunkaqar_super_admin||[]).push([[3252],{2203:(e,a,r)=>{r.d(a,{AR:()=>b,BA:()=>p,EV:()=>s,G3:()=>h,Vn:()=>u,Wn:()=>_,Zm:()=>d,_H:()=>m,cz:()=>y,dK:()=>v,hS:()=>l,jE:()=>f,kR:()=>w,nn:()=>g,tk:()=>c,vs:()=>A});var t=r(8556),n=r(3713),o=r(6491),i=r(2564);const s=async()=>{const{data:e}=await o.Z.get("/agencies/admin/profile");return e.data.user||[]},d=async()=>{const{data:e}=await o.Z.get("/add-types/");return e.data.adTypes||[]},l=async()=>{const{data:e}=await o.Z.get("/locations/emirates");return e.data.emirates||[]},c=async()=>{const{data:e}=await o.Z.get("/stats/dashboard");return e.data||[]},u=()=>(0,t.D)({mutationFn:async e=>(await o.Z.post("/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const r=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";i.Am.error(r),console.error("Upload failed:",e)}}),p=()=>(0,t.D)({mutationFn:async e=>(await o.Z.post("/files/upload/single/video",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const r=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";i.Am.error(r),console.error("Upload failed:",e)}}),_=()=>(0,t.D)({mutationFn:async e=>(await o.Z.put("/agencies/admin/profile",e)).data,onError:e=>{var a,r;const t=null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0];i.Am.error(t),console.error("Submission failed:",e)}}),m=()=>{const e=(0,n.NL)();return(0,t.D)({mutationFn:async e=>{let{id:a,visibility:r}=e;return(await o.Z.post("/properties/admin/set-visibility/".concat(a),{visibility:r})).data},onSuccess:()=>{i.Am.success("Visibility updated successfully!"),e.invalidateQueries("PropertiesAdmin")},onError:e=>{var a,r;const t=(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0])||"An error occurred.";i.Am.error(t),console.error("Submission failed:",e)}})},v=async()=>{const{data:e}=await o.Z.get("/property-properties/types");return e.data.properties||[]},h=async()=>{const{data:e}=await o.Z.get("/properties/admin/my-properties");return e.data.properties||[]},f=async e=>{const{data:a}=await o.Z.get("/properties/admin/".concat(e));return a.data.property||[]},g=()=>(0,t.D)({mutationFn:async e=>(await o.Z.post("/properties/admin",e)).data,onError:e=>{var a,r;const t=(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0])||"Submission failed. Please try again.";i.Am.error(t),console.error("Submission failed:",e)}}),y=e=>(0,t.D)({mutationFn:async a=>(await o.Z.put("/properties/admin/".concat(e),a)).data,onError:e=>{var a,r;const t=(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0])||"Submission failed. Please try again.";i.Am.error(t),console.error("Submission failed:",e)}}),A=()=>(0,t.D)({mutationFn:async e=>(await o.Z.get("/subscriptions/ad-type/".concat(e))).data.data.subscriptions,onError:e=>{var a,r;const t=(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0])||"Submission failed. Please try again.";i.Am.error(t),console.error("Submission failed:",e)}}),b=()=>(0,t.D)({mutationFn:async e=>(await o.Z.post("/property-subscriptions/admin",e)).data.data,onError:e=>{var a,r;const t=(null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.errors[0])||"Submission failed. Please try again.";i.Am.error(t),console.error("Submission failed:",e)}}),w=async e=>(await o.Z.get("/locations/choose-location?query=".concat(e))).data.data.hits},1084:(e,a,r)=>{r.r(a),r.d(a,{default:()=>v});var t=r(2791),n=r(7049),o=r(5705),i=r(2203),s=r(3713),d=r(4893),l=r(4866),c=r(3566),u=r(184);const p=(0,t.lazy)((()=>Promise.all([r.e(9025),r.e(3572),r.e(749),r.e(8511)]).then(r.bind(r,8511)))),_=(0,t.lazy)((()=>Promise.all([r.e(6856),r.e(71),r.e(9210)]).then(r.bind(r,7388)))),m=()=>{const e=(0,s.NL)(),[a,r]=(0,t.useState)(null),[m,v]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),{mutate:g}=(0,i.Wn)(),y=(0,t.useRef)(null),{data:A}=(0,d.a)({queryKey:["Emirates"],queryFn:i.hS}),{mutate:b}=(0,i.Vn)(),{data:w}=(0,d.a)({queryKey:["AccountDetails"],queryFn:i.EV}),x=(0,o.TA)({initialValues:{name:"",phone:"",description:"",image:[],servicesArea:[]},validate:e=>{const a={};return e.description||(a.description="description is required"),e.name||(a.name="Name is required"),e.phone?/^\+?[1-9]\d{1,14}$/i.test(e.phone)||(a.phone="Invalid phone number format"):a.phone="Phone number is required",e.servicesArea||(a.servicesArea="Emirate is required"),a},onSubmit:async t=>{f(!0);const n={description:t.description,name:t.name,phone:t.phone,servicesArea:t.servicesArea.filter(Boolean)||[],photo:a||(null===w||void 0===w?void 0:w.photo)};g(n,{onSuccess:()=>{e.invalidateQueries("AccountDetails"),r(null),y.current.show({severity:"success",summary:"Saved successfully!"}),f(!1)},onError:()=>{f(!1)}})}});(0,t.useEffect)((()=>{if(w){const{name:e,phone:a,description:r,servicesArea:t}=w;v(null===w||void 0===w?void 0:w.photo),x.setValues({name:e,phone:a,description:r,image:[],servicesArea:(null===t||void 0===t?void 0:t.map((e=>e._id)))||[]})}}),[w]);const S=(0,t.useCallback)((async e=>{const a=e.target.files[0];if(a){const e=new FormData;e.append("files",a),await b(e,{onSuccess:e=>{const a=e.data.files[0];r(a.link),x.setFieldValue("image",a.id)}})}}),[b,x]),Z=(0,t.useCallback)((()=>{r(null),x.setFieldValue("image","")}),[x]);return(0,u.jsxs)("div",{className:n.Z.user_information,children:[(0,u.jsx)(l.F,{ref:y}),h?(0,u.jsx)(c.Z,{}):null,(0,u.jsx)("div",{className:"title_page",children:(0,u.jsx)("h3",{children:"My Profile "})}),(0,u.jsx)("form",{onSubmit:x.handleSubmit,className:n.Z.form_contact_home,children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:n.Z.inout_adv,children:[(0,u.jsxs)("label",{children:["Name ",(0,u.jsx)("span",{children:"*"})]}),(0,u.jsx)("input",{name:"name",id:"name",className:n.Z.input,type:"text",onChange:x.handleChange,onBlur:x.handleBlur,value:x.values.name}),x.touched.name&&x.errors.name&&(0,u.jsx)("small",{className:"p-error",children:x.errors.name})]})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsxs)("div",{className:n.Z.inout_adv,children:[(0,u.jsxs)("label",{children:["Phone ",(0,u.jsx)("span",{children:"*"})]}),(0,u.jsx)("input",{type:"tel",id:"phone",name:"phone",onChange:x.handleChange,onBlur:x.handleBlur,value:x.values.phone}),x.touched.phone&&x.errors.phone&&(0,u.jsx)("small",{className:"p-error",children:x.errors.phone})]})}),(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(c.Z,{}),children:[(0,u.jsx)(p,{formik:x,getEmirates:A}),(0,u.jsx)(_,{image:a,imageValue:m,onImageUpload:S,onDeleteImage:Z})]}),(0,u.jsx)("button",{className:"add_btn mt-4",type:"submit",disabled:h,children:"Save Changes"})]})})]})},v=t.memo(m)},9411:(e,a,r)=>{r.d(a,{H:()=>s});var t=r(2791),n=r(7890),o=r(2062),i=r(5854),s=t.memo(t.forwardRef((function(){var e=t.useRef(null),a=t.useRef(null),r=function(){return e.current&&e.current.parentElement},s=function(){a.current&&(a.current.addEventListener("mousedown",l),i.p7.isTouchDevice()&&a.current.addEventListener("touchstart",d))},d=function(r){var t=i.p7.getOffset(a.current),n=r.targetTouches[0].pageX-t.left+document.body.scrollTop-i.p7.getWidth(e.current)/2,o=r.targetTouches[0].pageY-t.top+document.body.scrollLeft-i.p7.getHeight(e.current)/2;c(n,o)},l=function(r){if(!i.p7.isTouchDevice()){var t=i.p7.getOffset(a.current),n=r.pageX-t.left+document.body.scrollTop-i.p7.getWidth(e.current)/2,o=r.pageY-t.top+document.body.scrollLeft-i.p7.getHeight(e.current)/2;c(n,o)}},c=function(r,t){if(e.current&&"none"!==getComputedStyle(e.current,null).display){if(i.p7.removeClass(e.current,"p-ink-active"),!i.p7.getHeight(e.current)&&!i.p7.getWidth(e.current)){var n=Math.max(i.p7.getOuterWidth(a.current),i.p7.getOuterHeight(a.current));e.current.style.height=n+"px",e.current.style.width=n+"px"}e.current.style.top=t+"px",e.current.style.left=r+"px",i.p7.addClass(e.current,"p-ink-active")}};return(0,o.nw)((function(){e.current&&(a.current=r(),s())})),(0,o.rf)((function(){e.current&&!a.current&&(a.current=r(),s())})),(0,o.zq)((function(){e.current&&(a.current=null,a.current&&(a.current.removeEventListener("mousedown",l),i.p7.isTouchDevice()&&a.current.removeEventListener("touchstart",d)))})),n.ZP.ripple?t.createElement("span",{role:"presentation",ref:e,className:"p-ink",onAnimationEnd:function(e){i.p7.removeClass(e.currentTarget,"p-ink-active")}}):null})));s.displayName="Ripple"},7049:(e,a,r)=>{r.d(a,{Z:()=>t});const t={form_contact_home:"addAd_form_contact_home__XbiCu",formSelect:"addAd_formSelect__SICoj",inout_icon_textarea:"addAd_inout_icon_textarea__Gv9VS",payments:"addAd_payments__WSgJW",hr:"addAd_hr__wrpE8",bold:"addAd_bold__zGqD0",span:"addAd_span__yFHUx",left:"addAd_left__y+3JS",filterSort:"addAd_filterSort__Avvbx",option:"addAd_option__2MXoI",input:"addAd_input__uwNK2",btn_radio:"addAd_btn_radio__qihQ6",nots:"addAd_nots__6ohel",right:"addAd_right__dcHxt",inout_adv:"addAd_inout_adv__sWwqA",radio_container_size:"addAd_radio_container_size__8ugZJ",radio_wrapper:"addAd_radio_wrapper__B3b8s",radio_button:"addAd_radio_button__AacQ7",radio_checkmark:"addAd_radio_checkmark__x6B3-",radio_label:"addAd_radio_label__YO+DC",image_wrapper:"addAd_image_wrapper__GJPDP",image_slot:"addAd_image_slot__M+r09",upLoad:"addAd_upLoad__CiCwX",image_preview:"addAd_image_preview__QmXDC",number_minus_plus:"addAd_number_minus_plus__3rBn0",images_container:"addAd_images_container__6-tvk",div:"addAd_div__2nK+p",image_preview_item:"addAd_image_preview_item__i2LK3",delete_button:"addAd_delete_button__Lb8BQ",inoutIconDiv:"addAd_inoutIconDiv__gGtRX",resultSearch:"addAd_resultSearch__zVcop",selectedLocations:"addAd_selectedLocations__QMTSY",selectedLocation:"addAd_selectedLocation__sqfP0",input_locatin:"addAd_input_locatin__gUGs4",icon:"addAd_icon__ZgAbH",title_location:"addAd_title_location__dna7Q",ul:"addAd_ul__BP2ru",selected:"addAd_selected__1YOhD"}}}]);
//# sourceMappingURL=3252.82d05332.chunk.js.map