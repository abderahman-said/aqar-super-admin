"use strict";(self.webpackChunkaqar_super_admin=self.webpackChunkaqar_super_admin||[]).push([[2664],{7388:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});t(2791);var i=t(6856),s=t(71),o=t(7049),r=t(4420),n=t(184);const d=e=>{let{label:a="Upload image",placeholder:t="Upload img",image:d,imageValue:l,onImageUpload:_,onDeleteImage:c,onDeleteImageValue:u}=e;return(0,n.jsxs)("div",{className:o.Z.upLoad,children:[(0,n.jsxs)("label",{htmlFor:"image_upload",children:[a," ",(0,n.jsx)("span",{children:"*"})]}),(0,n.jsx)("div",{className:o.Z.image_container,children:(0,n.jsxs)("div",{id:"image_upload",className:o.Z.image_slot,children:[(0,n.jsx)(i.YFT,{}),t,(0,n.jsx)("input",{type:"file",id:"image_upload",onChange:_})]})}),(0,n.jsxs)("div",{className:"flex gap-3 align-items-center ",children:[l&&(0,n.jsx)("div",{className:o.Z.image_preview,children:(0,n.jsx)("div",{className:o.Z.images_container,children:(0,n.jsx)(r.E,{src:l,loading:"lazy",alt:"uploaded",width:80,height:80})})}),d&&(0,n.jsx)("div",{className:o.Z.image_preview,children:(0,n.jsxs)("div",{className:o.Z.images_container,children:[(0,n.jsx)(r.E,{src:d,loading:"lazy",alt:"uploaded",width:80,height:80}),(0,n.jsx)("button",{type:"button",onClick:c,className:o.Z.delete_button,children:(0,n.jsx)(s.bjh,{})})]})})]})]})}},2203:(e,a,t)=>{t.d(a,{AR:()=>A,BA:()=>u,EV:()=>n,G3:()=>v,Vn:()=>c,Wn:()=>m,Zm:()=>d,_H:()=>p,cz:()=>f,dK:()=>h,hS:()=>l,jE:()=>g,kR:()=>Z,nn:()=>b,tk:()=>_,vs:()=>y});var i=t(8556),s=t(3713),o=t(6491),r=t(2564);const n=async()=>{const{data:e}=await o.Z.get("/agencies/admin/profile");return e.data.user||[]},d=async()=>{const{data:e}=await o.Z.get("/add-types/");return e.data.adTypes||[]},l=async()=>{const{data:e}=await o.Z.get("/locations/emirates");return e.data.emirates||[]},_=async()=>{const{data:e}=await o.Z.get("/stats/dashboard");return e.data||[]},c=()=>(0,i.D)({mutationFn:async e=>(await o.Z.post("/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const t=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";r.Am.error(t),console.error("Upload failed:",e)}}),u=()=>(0,i.D)({mutationFn:async e=>(await o.Z.post("/files/upload/single/video",e,{headers:{"Content-Type":"multipart/form-data"}})).data,onError:e=>{var a;const t=(null===(a=e.response)||void 0===a?void 0:a.errors[0])||"Upload failed. Please try again.";r.Am.error(t),console.error("Upload failed:",e)}}),m=()=>(0,i.D)({mutationFn:async e=>(await o.Z.put("/agencies/admin/profile",e)).data,onError:e=>{var a,t;const i=null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0];r.Am.error(i),console.error("Submission failed:",e)}}),p=()=>{const e=(0,s.NL)();return(0,i.D)({mutationFn:async e=>{let{id:a,visibility:t}=e;return(await o.Z.post("/properties/admin/set-visibility/".concat(a),{visibility:t})).data},onSuccess:()=>{r.Am.success("Visibility updated successfully!"),e.invalidateQueries("PropertiesAdmin")},onError:e=>{var a,t;const i=(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0])||"An error occurred.";r.Am.error(i),console.error("Submission failed:",e)}})},h=async()=>{const{data:e}=await o.Z.get("/property-properties/types");return e.data.properties||[]},v=async()=>{const{data:e}=await o.Z.get("/properties/admin/my-properties");return e.data.properties||[]},g=async e=>{const{data:a}=await o.Z.get("/properties/admin/".concat(e));return a.data.property||[]},b=()=>(0,i.D)({mutationFn:async e=>(await o.Z.post("/properties/admin",e)).data,onError:e=>{var a,t;const i=(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0])||"Submission failed. Please try again.";r.Am.error(i),console.error("Submission failed:",e)}}),f=e=>(0,i.D)({mutationFn:async a=>(await o.Z.put("/properties/admin/".concat(e),a)).data,onError:e=>{var a,t;const i=(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0])||"Submission failed. Please try again.";r.Am.error(i),console.error("Submission failed:",e)}}),y=()=>(0,i.D)({mutationFn:async e=>(await o.Z.get("/subscriptions/ad-type/".concat(e))).data.data.subscriptions,onError:e=>{var a,t;const i=(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0])||"Submission failed. Please try again.";r.Am.error(i),console.error("Submission failed:",e)}}),A=()=>(0,i.D)({mutationFn:async e=>(await o.Z.post("/property-subscriptions/admin",e)).data.data,onError:e=>{var a,t;const i=(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.errors[0])||"Submission failed. Please try again.";r.Am.error(i),console.error("Submission failed:",e)}}),Z=async e=>(await o.Z.get("/locations/choose-location?query=".concat(e))).data.data.hits},2664:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var i=t(9048),s=t(6951),o=t(2791),r=t(9434),n=t(4286),d=t(4866),l=t(5705),_=t(9025),c=t(5854),u=t(661),m=t(2203),p=t(7388),h=t(184);const v=e=>{var a,t;let{visible:v,setVisible:g,selectedType:b,selectedSpciality:f}=e;const y=(0,r.I0)(),A=(0,o.useRef)(null),[Z,F]=(0,o.useState)((null===f||void 0===f||null===(a=f.logo)||void 0===a?void 0:a.link)||null),[x,w]=(0,o.useState)(!1),S=(0,l.TA)({enableReinitialize:!0,initialValues:{nameEn:f?f.name.en:"",nameAr:f?f.name.ar:"",logo:f?null===(t=f.logo)||void 0===t?void 0:t.id:""},validate:e=>{const a={};return e.nameEn||(a.nameEn="English name is required."),e.nameAr||(a.nameAr="Arabic name is required."),"amenity"!==b||e.logo||(a.logo="Logo is required for amenity."),a},onSubmit:e=>{const a={name:{ar:e.nameAr,en:e.nameEn},type:b,logo:e.logo};f?y((0,u.Cu)({id:f._id,data:a})).unwrap().then((()=>{y((0,u.Cv)()),S.resetForm(),g(!1),D()})).catch((e=>{console.error(e.message)})):y((0,u.PG)(a)).unwrap().then((()=>{y((0,u.Cv)()),S.resetForm(),g(!1),D()})).catch((e=>{console.error(e.message)}))}}),j=e=>!(!S.touched[e]||!S.errors[e]),k=e=>j(e)?(0,h.jsx)("small",{className:"p-error",children:S.errors[e]}):(0,h.jsx)("small",{className:"p-error",children:"\xa0"}),{mutate:E}=(0,m.Vn)(),N=(0,o.useCallback)((async e=>{const a=e.target.files[0];if(a){w(!0),A.current.show({severity:"info",summary:"Uploading image..."});const e=new FormData;e.append("files",a),await E(e,{onSuccess:e=>{const a=e.data.files[0];F(a.link),S.setFieldValue("logo",a.id),w(!1),A.current.show({severity:"success",summary:"Image uploaded successfully!"})},onError:()=>{w(!1),A.current.show({severity:"error",summary:"Image upload failed"})}})}}),[E,S]),C=(0,o.useCallback)((()=>{F(null),S.setFieldValue("logo","")}),[S]),D=()=>{A.current.show({severity:"success",summary:"Saved successfully!"})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.F,{ref:A}),(0,h.jsx)(n.V,{header:b,visible:v,style:{width:"50vw"},onHide:()=>g(!1),children:(0,h.jsxs)("form",{onSubmit:S.handleSubmit,className:i.Z.Signup_form_container,children:[(0,h.jsxs)("div",{className:"grid",children:[(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:s.Z.inputFormik2,children:[(0,h.jsxs)("div",{className:s.Z.Signup_container,children:[(0,h.jsx)("label",{htmlFor:"nameAr",children:"Arabic Name"}),(0,h.jsx)(_.o,{id:"nameAr",name:"nameAr",className:(0,c.AK)({"p-invalid":j("nameAr")}),value:S.values.nameAr,onChange:e=>S.setFieldValue("nameAr",e.target.value)})]}),k("nameAr")]})}),(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:s.Z.inputFormik2,children:[(0,h.jsxs)("div",{className:s.Z.Signup_container,children:[(0,h.jsx)("label",{htmlFor:"nameEn",children:"English Name"}),(0,h.jsx)(_.o,{id:"nameEn",name:"nameEn",className:(0,c.AK)({"p-invalid":j("nameEn")}),value:S.values.nameEn,onChange:e=>S.setFieldValue("nameEn",e.target.value)})]}),k("nameEn")]})}),"amenity"===b&&(0,h.jsxs)("div",{className:"col-12 md:col-12 lg:col-12",children:[(0,h.jsx)(p.default,{label:"Upload Logo",placeholder:"Choose image",image:Z,imageValue:S.values.appLogoLink,onImageUpload:N,onDeleteImage:C}),x&&(0,h.jsx)("p",{children:"Loading image..."})]})]}),(0,h.jsx)("div",{className:"form-actions",children:(0,h.jsx)("button",{type:"submit",className:"add_btn mx-auto",children:"Save"})})]})})]})}},9048:(e,a,t)=>{t.d(a,{Z:()=>i});const i={FormBody:"Forms_FormBody__7Accf",Signup_form_container:"Forms_Signup_form_container__UfshA",Signup_container:"Forms_Signup_container__14q4v",Dialog_Signup_container:"Forms_Dialog_Signup_container__h0Uf3",labelDocumentsFile:"Forms_labelDocumentsFile__oyS4R",next:"Forms_next__oW+PU",NextDialog:"Forms_NextDialog__efAM9",prev:"Forms_prev__upQOK",user_Info:"Forms_user_Info__2Ow3k",info:"Forms_info__HWb8L",icon:"Forms_icon__x6QtY",Icon_image:"Forms_Icon_image__UOSpS",image_text:"Forms_image_text__2LfcF",text_span:"Forms_text_span__36KNU",text_p:"Forms_text_p__Fyus3",image_show:"Forms_image_show__QMJXM",Images_show_container:"Forms_Images_show_container__X3gub",SignInfo:"Forms_SignInfo__5FhQd",SignupForm:"Forms_SignupForm__Sx6sj",change_store_image:"Forms_change_store_image__jLTHi",tab_icon:"Forms_tab_icon__JTk4R",plusBtn:"Forms_plusBtn__tjerp",inputFormik3:"Forms_inputFormik3__9ODPH",inputFormik4:"Forms_inputFormik4__93ynL",tab_submit:"Forms_tab_submit__C33xC",upload_img:"Forms_upload_img__mheDU",upload_img_2:"Forms_upload_img_2__zmoof",circle:"Forms_circle__3EMwO",blus:"Forms_blus__ALd8K",resha_dialog:"Forms_resha_dialog__WIgHS",edit_img:"Forms_edit_img__mNxYq",data__info:"Forms_data__info__dGk7F"}},7049:(e,a,t)=>{t.d(a,{Z:()=>i});const i={form_contact_home:"addAd_form_contact_home__XbiCu",formSelect:"addAd_formSelect__SICoj",inout_icon_textarea:"addAd_inout_icon_textarea__Gv9VS",payments:"addAd_payments__WSgJW",hr:"addAd_hr__wrpE8",bold:"addAd_bold__zGqD0",span:"addAd_span__yFHUx",left:"addAd_left__y+3JS",filterSort:"addAd_filterSort__Avvbx",option:"addAd_option__2MXoI",input:"addAd_input__uwNK2",btn_radio:"addAd_btn_radio__qihQ6",nots:"addAd_nots__6ohel",right:"addAd_right__dcHxt",inout_adv:"addAd_inout_adv__sWwqA",radio_container_size:"addAd_radio_container_size__8ugZJ",radio_wrapper:"addAd_radio_wrapper__B3b8s",radio_button:"addAd_radio_button__AacQ7",radio_checkmark:"addAd_radio_checkmark__x6B3-",radio_label:"addAd_radio_label__YO+DC",image_wrapper:"addAd_image_wrapper__GJPDP",image_slot:"addAd_image_slot__M+r09",upLoad:"addAd_upLoad__CiCwX",image_preview:"addAd_image_preview__QmXDC",number_minus_plus:"addAd_number_minus_plus__3rBn0",images_container:"addAd_images_container__6-tvk",div:"addAd_div__2nK+p",image_preview_item:"addAd_image_preview_item__i2LK3",delete_button:"addAd_delete_button__Lb8BQ",inoutIconDiv:"addAd_inoutIconDiv__gGtRX",resultSearch:"addAd_resultSearch__zVcop",selectedLocations:"addAd_selectedLocations__QMTSY",selectedLocation:"addAd_selectedLocation__sqfP0",input_locatin:"addAd_input_locatin__gUGs4",icon:"addAd_icon__ZgAbH",title_location:"addAd_title_location__dna7Q",ul:"addAd_ul__BP2ru",selected:"addAd_selected__1YOhD"}},8556:(e,a,t)=>{t.d(a,{D:()=>x});var i,s,o,r,n,d,l=t(2791),_=t(101),c=t(2346),u=t(6033),m=t(3889),p=t(3092),h=t(2756),v=t(7211),g=t(8974),b=t(5391),f=(i=new WeakMap,s=new WeakMap,o=new WeakMap,r=new WeakMap,n=new WeakSet,d=new WeakSet,class extends g.l{constructor(e,a){super(),(0,_.Z)(this,d),(0,_.Z)(this,n),(0,c.Z)(this,i,{writable:!0,value:void 0}),(0,c.Z)(this,s,{writable:!0,value:void 0}),(0,c.Z)(this,o,{writable:!0,value:void 0}),(0,c.Z)(this,r,{writable:!0,value:void 0}),(0,p.Z)(this,i,e),this.setOptions(a),this.bindMethods(),(0,m.Z)(this,n,y).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var a;const t=this.options;this.options=(0,u.Z)(this,i).defaultMutationOptions(e),(0,b.VS)(this.options,t)||(0,u.Z)(this,i).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,u.Z)(this,o),observer:this}),null!==t&&void 0!==t&&t.mutationKey&&this.options.mutationKey&&(0,b.Ym)(t.mutationKey)!==(0,b.Ym)(this.options.mutationKey)?this.reset():"pending"===(null===(a=(0,u.Z)(this,o))||void 0===a?void 0:a.state.status)&&(0,u.Z)(this,o).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,u.Z)(this,o))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,m.Z)(this,n,y).call(this),(0,m.Z)(this,d,A).call(this,e)}getCurrentResult(){return(0,u.Z)(this,s)}reset(){var e;null===(e=(0,u.Z)(this,o))||void 0===e||e.removeObserver(this),(0,p.Z)(this,o,void 0),(0,m.Z)(this,n,y).call(this),(0,m.Z)(this,d,A).call(this)}mutate(e,a){var t;return(0,p.Z)(this,r,a),null===(t=(0,u.Z)(this,o))||void 0===t||t.removeObserver(this),(0,p.Z)(this,o,(0,u.Z)(this,i).getMutationCache().build((0,u.Z)(this,i),this.options)),(0,u.Z)(this,o).addObserver(this),(0,u.Z)(this,o).execute(e)}});function y(){var e,a;const t=null!==(e=null===(a=(0,u.Z)(this,o))||void 0===a?void 0:a.state)&&void 0!==e?e:(0,h.R)();(0,p.Z)(this,s,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})}function A(e){v.V.batch((()=>{if((0,u.Z)(this,r)&&this.hasListeners()){const c=(0,u.Z)(this,s).variables,m=(0,u.Z)(this,s).context;var a,t,i,o;if("success"===(null===e||void 0===e?void 0:e.type))null===(a=(t=(0,u.Z)(this,r)).onSuccess)||void 0===a||a.call(t,e.data,c,m),null===(i=(o=(0,u.Z)(this,r)).onSettled)||void 0===i||i.call(o,e.data,null,c,m);else if("error"===(null===e||void 0===e?void 0:e.type)){var n,d,l,_;null===(n=(d=(0,u.Z)(this,r)).onError)||void 0===n||n.call(d,e.error,c,m),null===(l=(_=(0,u.Z)(this,r)).onSettled)||void 0===l||l.call(_,void 0,e.error,c,m)}}this.listeners.forEach((e=>{e((0,u.Z)(this,s))}))}))}var Z=t(3713),F=t(8981);function x(e,a){const t=(0,Z.NL)(a),[i]=l.useState((()=>new f(t,e)));l.useEffect((()=>{i.setOptions(e)}),[i,e]);const s=l.useSyncExternalStore(l.useCallback((e=>i.subscribe(v.V.batchCalls(e))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),o=l.useCallback(((e,a)=>{i.mutate(e,a).catch(F.Z)}),[i]);if(s.error&&(0,F.L)(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}},8981:(e,a,t)=>{function i(e,a){return"function"===typeof e?e(...a):!!e}function s(){}t.d(a,{L:()=>i,Z:()=>s})}}]);
//# sourceMappingURL=2664.e35413b1.chunk.js.map